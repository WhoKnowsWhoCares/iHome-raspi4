- id: '1686836176720'
  alias: calendar_sport_event
  description: ''
  trigger:
  - platform: calendar
    event: start
    offset: '-3:0:0'
    entity_id: calendar.as_frantsev_gmail_com
  condition:
  - condition: state
    entity_id: calendar.as_frantsev_gmail_com
    attribute: description
    state: sport
  action:
  - service: media_player.play_media
    data:
      media_content_type: text
      media_content_id: Через три часа запланирован {{ state_attr("calendar.as_frantsev_gmail_com",
        "message") }}, не забудьте поесть
      enqueue: play
    target:
      entity_id: media_player.yandex_station_ff98f0294a56d19578794aff
  mode: single
- id: GitHub push updates
  alias: github_push_updates
  description: Push Updates
  trigger:
  - platform: time
    at: 02:00:00
  condition: []
  action:
  - service: shell_command.pushupdates_to_github
    data: {}
  mode: single
- id: Set theme
  alias: set_theme_at_startup
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  action:
  - service: frontend.set_theme
    data:
      name: ios-dark-mode-blue-red
- id: Database zip
  alias: database_zip
  initial_state: true
  trigger:
  - platform: time
    at: 01:00:00
  action:
  - service: recorder.purge
    data:
      keep_days: 3
      repack: true
- id: Ok to Alarm
  alias: alarm_allowed
  trigger:
  - platform: time
    at: 05:00:00
  action:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.morning_alarm
- id: Not ok to Alarm
  alias: alarm_forbidden
  trigger:
  - platform: time
    at: '12:00:00'
  action:
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.morning_alarm
- id: NFC PhoneCharge
  alias: nfc_phone_charge_scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 28a20900-9be1-4e79-9b67-7a36c4dd3f21
  condition: []
  action:
  - type: turn_on
    device_id: 77e1896af65516a68096c8cc777f8bea
    entity_id: 133c7fc6edf8770c9c265fc8f51e7484
    domain: switch
  mode: single
- id: Process use High
  alias: process_use_high
  trigger:
  - platform: numeric_state
    entity_id: sensor.processor_use_percent
    above: 80
  action:
  - service: notify.telegram
    data:
      message: 'ALERT: Processor usage on raspi4 is high'
  - repeat:
      until:
      - condition: numeric_state
        entity_id: sensor.processor_use_percent
        below: 80
      sequence:
      - service: notify.telegram
        data:
          message: 'ALERT: Processor usage on raspi4 is high: {{states(''sensor.processor_use_percent'')|int}}%'
      - delay:
          hours: 0
          minutes: 0
          seconds: 5
          milliseconds: 0
- id: Disk use High
  alias: disk_use_high
  trigger:
  - platform: numeric_state
    entity_id: sensor.disk_use_percent
    above: 80
  action:
  - service: notify.telegram
    data:
      message: 'ALERT: Disk usage on raspi4 is high: {{states(''sensor.disk_use_percent'')|int}}%'
- id: Memory use High
  alias: memory_use_high
  trigger:
  - platform: numeric_state
    entity_id: sensor.memory_use_percent
    above: 80
  action:
  - repeat:
      until:
      - condition: numeric_state
        entity_id: sensor.memory_use_percent
        below: 80
      sequence:
      - service: notify.telegram
        data:
          message: 'ALERT: Memory usage on raspi4 is high: {{states(''sensor.memory_use_percent'')|int}}%'
      - delay:
          hours: 0
          minutes: 0
          seconds: 10
          milliseconds: 0
- id: Processor temperature High
  alias: processor_temp_high
  trigger:
  - platform: numeric_state
    entity_id: sensor.processor_temperature
    above: 70
  action:
  - repeat:
      until:
      - condition: numeric_state
        entity_id: sensor.processor_temperature
        below: 70
      sequence:
      - service: notify.telegram
        data:
          message: 'ALERT: Processor temperature on raspi4 is high: {{states(''sensor.processor_temperature'')|int}}C'
      - delay:
          hours: 0
          minutes: 0
          seconds: 10
          milliseconds: 0
- id: '1687085624939'
  alias: calendar_event
  description: ''
  trigger:
  - platform: calendar
    event: start
    offset: -0:15:0
    entity_id: calendar.as_frantsev_gmail_com
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: calendar.as_frantsev_gmail_com
      attribute: description
      state: sport
  action:
  - service: media_player.play_media
    data:
      media_content_type: text
      media_content_id: Через полчаса по плану {{ state_attr("calendar.as_frantsev_gmail_com",
        "message") }}
      enqueue: play
    target:
      entity_id: media_player.yandex_station_ff98f0294a56d19578794aff
  mode: single
- id: '1688286182390'
  alias: coming_home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.alexander
    zone: zone.home_wide
    event: enter
  condition: []
  action:
  - service: input_select.select_option
    data:
      option: Coming
    target:
      entity_id: input_select.home_come_leave
  - service: notify.telegram
    data:
      message: Looks like you are almost at home
  mode: single
- id: '1688286258125'
  alias: coming_gym
  description: ''
  trigger:
  - platform: zone
    entity_id: person.alexander
    zone: zone.gym
    event: enter
  condition: []
  action:
  - service: notify.telegram
    data:
      message: Looks like you are almost at Gym
    enabled: false
  mode: single
- id: '1688286402353'
  alias: leaving_home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.alexander
    zone: zone.home
    event: leave
  condition: []
  action:
  - service: input_select.select_option
    data:
      option: Away
    target:
      entity_id: input_select.home_come_leave
  mode: single
- id: '1688286484143'
  alias: leaving_gym
  description: ''
  trigger:
  - platform: zone
    entity_id: person.alexander
    zone: zone.gym
    event: leave
  condition: []
  action:
  - service: notify.telegram
    data:
      message: Looks like you are leaving Gym
    enabled: false
  mode: single
- id: '1693426774882'
  alias: light_outside
  description: when the sun is rising
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    above: 5
  condition: []
  action:
  - service: input_boolean.turn_off
    data: {}
  mode: single
- id: '1693426907453'
  alias: dark_outside
  description: when the sun is falling
  trigger:
  - platform: numeric_state
    entity_id: sun.sun
    attribute: elevation
    below: 5
  condition: []
  action:
  - service: input_boolean.turn_on
    data: {}
    target:
      entity_id: input_boolean.dark_outside
  mode: single
- id: '1693428056820'
  alias: hall_motion_detected
  description: ''
  use_blueprint:
    path: vorion/send-camera-snapshot-notification-on-motion.yaml
    input:
      motion_sensor: binary_sensor.mi_move_sensor_occupancy
      camera: camera.chuangmi_021a04_c49c_camera_control
      notify_device: 588afa31c35eefb12d731e53f100cb46
      notification_title: Hall motion detected!
      notification_message: ''
