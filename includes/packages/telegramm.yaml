telegramm:
  script:
    system_report:
      alias: –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã
      sequence:
        - service: notify.telegram
          data:
            message: |
              {{"\U0001F6C0"}} –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
              {{"\U0001F567"}} –û—Ç—á–µ—Ç –Ω–∞ {{ states('sensor.time_date') }}

              –ü—Ä–∏—Ö–æ–∂–∞—è
              {{"\U0001F4A1"}} –°–≤–µ—Ç - {{ states('light.yeelink_mono6_6fc9_light') }} 
              {{"\U0001f6aa"}} –î–≤–µ—Ä—å - {{ states('binary_sensor.door_hall_xiaomi_contact') }}
              {{"üíß"}} –ü—Ä–æ—Ç–µ—á–∫–∞ - {{ states('binary_sensor.bathroom_leak_water_leak') }}

              –ö–æ–º–Ω–∞—Ç–∞
              {{"\U0001F4A1"}} –°–≤–µ—Ç bulb/bed/string - {{ states('light.philips_bulb_0ba9_light') }}/{{ states('switch.zigbee_switch_l1') }}/{{ states('switch.zigbee_switch_l2') }} 
              {{"\U0001f6aa"}} –ë–∞–ª–∫–æ–Ω - {{ states('binary_sensor.door_balcon_tuya_contact') }}

              –ö—É—Ö–Ω—è
              {{"\U0001F4A1"}} –°–≤–µ—Ç main/sub - {{ states('light.kitchen_bulb') }}/{{ states('switch.socket_switch_socket_1') }}
              {{"\U0001F567"}} –¢–∞–π–º–µ—Ä –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–ø–æ–ª–∏–≤–∞ - {{ states('input_number.irrigation_timer') }}

  automation:
    - id: –û—Ç—á–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã
      alias: tg_server_start
      initial_state: true
      trigger:
        - platform: homeassistant
          event: start
      action:
        - service: notify.telegram
          data:
            message: |
              {{"\U0001F4AC"}} –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä Raspberry Pi 
              {{"\U0001F567"}} –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—É—Å–∫ –≤ {{ states('sensor.time_date') }} 
              {{"\U0001F4C3"}} –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É
        - delay: 00:01:00
        - service: script.turn_on
          entity_id: script.system_report

    - id: –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç—á–µ—Ç
      alias: tg_send_report
      initial_state: true
      trigger:
        - platform: event
          event_type: telegram_command
          event_data:
            command: "/report"
      action:
        - service: script.turn_on
          entity_id:
            - script.system_report

    - id: –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø–æ–ª–∏–≤–∞
      alias: tg_refill_water
      initial_state: true
      trigger:
        - platform: event
          event_type: telegram_command
          event_data:
            command: "/refill_water"
      action:
        - service: input_number.set_value
          target:
            entity_id: input_number.irrigation_timer
          data:
            value: 40
        - service: notify.telegram
          data:
            message: "–ê–≤—Ç–æ–ø–æ–ª–∏–≤ –æ–±–Ω–æ–≤–ª–µ–Ω"

    - id: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
      alias: tg_switch_pc
      initial_state: false
      trigger:
        - platform: event
          event_type: telegram_command
          event_data:
            command: "/switch_pc"
      action:
        - service: switch.toggle
          target:
            entity_id: switch.remote_pc
        - service: notify.telegram
          data:
            message: "–ì–æ—Ç–æ–≤–æ"

    # - id: –°–≤–µ—Ç–∏–ª—å–Ω–∏–∫
    #   alias: toggle_light_room
    #   initial_state: true
    #   trigger:
    #     - platform: event
    #       event_type: telegram_command
    #       event_data:
    #         command: "/light_room"
    # action:
    #   - service: light.toggle
    #     data: {}
    #     target:
    #       entity_id: light.mi_philips_bulb_room
    #   - service: notify.telegram
    #     data:
    #       message: "–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –≤ –∫–æ–º–Ω–∞—Ç–µ - {{ states('light.mi_philips_bulb_room') }} "

    # - id: –°–≤–µ—Ç –≤ –ø—Ä–∏—Ö–æ–∂–µ–π
    #   alias: toggle_light_hall
    #   initial_state: true
    #   trigger:
    #     - platform: event
    #       event_type: telegram_command
    #       event_data:
    #         command: "/light_hall"
    #   action:
    #     - service: light.toggle
    #       data: {}
    #       target:
    #         entity_id: light.mi_yeelink_bulb
    #     - service: notify.telegram
    #       data:
    #         message: "–°–≤–µ—Ç –≤ –ø—Ä–∏—Ö–æ–∂–µ–π - {{ states('light.mi_yeelink_bulb') }} "

    # - id: –í—ã–∑–æ–≤ –ê–ª–∏—Å—ã
    #   aliase: alice_call
    #   trigger:
    #     platform: event
    #     event_type: telegram_command
    #     event_data:
    #       command: "/alice"
    #   action:
    #     - service: media_player.play_media
    #       entity_id: media_player.yandex_station_ff98f0294a56d19578794aff
    #       data_template:
    #         media_content_id: "–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
    #         media_content_type: text
    #     - service: notify.telegram
    #       data:
    #         message: "–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"

    # - id: –í–æ–ø—Ä–æ—Å –ê–ª–∏—Å–µ
    #   aliase: alice_telegramm_question
    #   trigger:
    #     platform: event
    #     event_type: telegram_text
    #   action:
    #     service: media_player.play_media
    #     entity_id: media_player.yandex_station_ff98f0294a56d19578794aff
    #     data_template:
    #       media_content_id: "{{ trigger.event.data.text }}"
    #       media_content_type: "question:{{ trigger.event.data.chat_id }}"

    # - id: –û—Ç–≤–µ—Ç –ê–ª–∏—Å—ã
    #   aliase: alice_telegramm_response
    #   trigger:
    #     platform: event
    #     event_type: yandex_station_response
    #   action:
    #     service: notify.telegram
    #     data_template:
    #       target: "{{ trigger.event.data.request_id }}"
    #       message: "{{ trigger.event.data.text }}"
